# Binary name
BINARY_NAME=server

.PHONY: all
all: build test

# Build the project locally (if you ever need to)
.PHONY: build
build:
	@echo "ğŸ˜ Building Go Backend..."
	go build -o bin/$(BINARY_NAME) main.go

# NEW: Run this to install libraries via Docker without installing Go locally
# Usage: make deps
.PHONY: deps
deps:
	@echo "ğŸ“¦ Updating dependencies via Docker..."
	docker run --rm -v "$(PWD)":/app -w /app golang:1.24-alpine \
		go get github.com/lib/pq golang.org/x/crypto/bcrypt

.PHONY: lint
lint:
	@echo "ğŸ” Linting Backend..."
	go vet ./...

.PHONY: test
test:
	@echo "ğŸ§ª Running Backend Tests..."
	go test -v ./...

.PHONY: clean
clean:
	@echo "ğŸ§¹ Cleaning Backend..."
	rm -rf bin